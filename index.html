{% extends "base.html" %}
{% block content %}

<!-- ================= HERO SECTION ================= -->
{% if hero %}
<section class="relative w-full min-h-screen flex items-center justify-center text-white overflow-hidden">
  {% if hero.media_type == 'video' %}
  <video id="heroVideo" autoplay muted loop playsinline preload="auto"
         class="absolute inset-0 w-full h-full object-cover">
    <source src="{{ url_for('static', filename='uploads/' + hero.filename) }}" type="video/mp4">
    Your browser does not support HTML5 video.
  </video>
  {% elif hero.media_type == 'image' %}
  <img src="{{ url_for('static', filename='uploads/' + hero.filename) }}"
       class="absolute inset-0 w-full h-full object-cover" alt="Hero image">
  {% endif %}

  <!-- Overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/80"></div>

  <!-- Text Content -->
  <div class="relative z-10 text-center max-w-4xl px-6">
    <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight leading-tight">
      <span class="text-primary">Creovibe</span> Digital Studio
    </h1>
    <p class="mt-6 text-lg md:text-2xl text-gray-200">
      Crafting visuals that move audiences & elevate brands
    </p>
    <div class="mt-10 flex flex-wrap justify-center gap-4">
      <a href="#portfolio"
         class="bg-primary text-white px-8 py-3 rounded-full font-semibold hover:bg-primary2 transition">
         View Portfolio
      </a>
      <a href="{{ url_for('contact') }}"
         class="border border-white/30 px-8 py-3 rounded-full hover:bg-white/10 transition">
         Book a Shoot
      </a>
    </div>
  </div>
</section>
{% else %}
<!-- fallback hero -->
<section class="flex items-center justify-center h-[80vh] bg-gray-900 text-white">
  <div class="text-center">
    <h1 class="text-6xl font-bold text-primary">Creovibe</h1>
    <p class="mt-3 text-xl text-gray-300">Premium Photography & Visual Artistry</p>
  </div>
</section>
{% endif %}

<!-- ================= ABOUT SECTION ================= -->
<section class="bg-gray-900 py-24 px-6 text-center text-gray-100">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-bold text-white">Where Vision Meets Perfection</h2>
    <p class="mt-6 text-lg text-gray-300 leading-relaxed">
      We combine artistry, precision, and technology to create powerful imagery that defines your brand‚Äôs identity.
      From concept to final frame, we bring emotion, story, and impact to every visual.
    </p>
  </div>
</section>

<!-- ================= SERVICES SECTION ================= -->
<section class="bg-gray-800 py-24 px-6 text-gray-100">
  <div class="max-w-6xl mx-auto text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-primary">Our Core Services</h2>
    <p class="mt-3 text-gray-300">Digital marketing & creative production designed for results</p>

    <div class="mt-12 grid sm:grid-cols-2 lg:grid-cols-3 gap-8 text-left">
      {% for s in [
        {'title': 'Social Media Marketing', 'desc': 'Grow and engage your audience on every platform.', 'icon': 'üë•'},
        {'title': 'SEO Optimization', 'desc': 'Rank higher, reach faster, stay visible on Google.', 'icon': 'üîç'},
        {'title': 'Brand Management', 'desc': 'Shape and protect your unique brand identity.', 'icon': 'üè∑Ô∏è'},
        {'title': 'Video Production', 'desc': 'Capture moments that tell your story.', 'icon': 'üé•'},
        {'title': 'Photography', 'desc': 'Create stunning visuals that define your brand.', 'icon': 'üì∏'},
        {'title': 'UI/UX Design', 'desc': 'Design intuitive experiences that convert visitors to fans.', 'icon': 'üé®'}
      ] %}
      <div class="p-8 bg-gray-900 rounded-xl shadow hover:shadow-lg transition">
        <div class="text-4xl mb-4">{{ s.icon }}</div>
        <h3 class="font-semibold text-xl text-white">{{ s.title }}</h3>
        <p class="text-gray-300 mt-2">{{ s.desc }}</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ================= PORTFOLIO SECTION ================= -->
<section id="portfolio" class="py-24 px-6 bg-gray-900 text-white">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-3xl md:text-4xl font-bold text-center text-primary mb-12">Our Collection</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
      {% for media in media_list %}
        {% if not media.is_hero %}
        <div class="group relative overflow-hidden rounded-2xl bg-gray-800 hover:scale-[1.02] transition-transform">
          {% if media.media_type == 'image' %}
            <a href="{{ url_for('static', filename='uploads/' + media.filename) }}" data-lightbox="portfolio">
              <img src="{{ url_for('static', filename='uploads/' + media.filename) }}"
                   class="w-full h-72 object-cover rounded-xl" alt="{{ media.caption }}">
            </a>
          {% elif media.media_type == 'video' %}
            <video controls class="w-full h-72 object-cover rounded-xl">
              <source src="{{ url_for('static', filename='uploads/' + media.filename) }}" type="video/mp4">
            </video>
          {% endif %}
          {% if media.caption %}
          <div class="absolute bottom-0 w-full bg-black/60 text-center py-2 opacity-0 group-hover:opacity-100 transition">
            <p class="text-sm text-gray-200 italic">{{ media.caption }}</p>
          </div>
          {% endif %}
        </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<!-- ================= CTA SECTION ================= -->
<section class="bg-primary text-white py-20 text-center">
  <h2 class="text-3xl md:text-4xl font-bold">Let‚Äôs Capture Your Story</h2>
  <p class="mt-4 text-lg">Talk to us about your next creative project today.</p>
  <a href="{{ url_for('contact') }}" class="inline-block mt-8 bg-gray-900 text-primary px-8 py-3 rounded-full font-semibold hover:bg-gray-800 transition">
    Get in Touch
  </a>
</section>

<!-- ================= LIGHTBOX ================= -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>

<!-- ================= JS FIX ================= -->
<script>
  (function() {
    const v = document.getElementById('heroVideo');
    if (v) {
      v.muted = true;
      v.play().catch(err => console.warn('Autoplay failed:', err));
    }
  })();
</script>

{% endblock %}
